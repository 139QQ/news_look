# NewsLook è´¢ç»æ–°é—»çˆ¬è™«ç³»ç»Ÿ

[![Python](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org)
[![Flask](https://img.shields.io/badge/flask-2.2+-green.svg)](https://flask.palletsprojects.com)
[![Vue](https://img.shields.io/badge/vue-3.4+-brightgreen.svg)](https://vuejs.org)
[![Vite](https://img.shields.io/badge/vite-5.0+-purple.svg)](https://vitejs.dev)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Performance](https://img.shields.io/badge/performance-90%2B-success.svg)](#æ€§èƒ½ä¼˜åŒ–)

**ä¸“ä¸šçš„è´¢ç»æ–°é—»çˆ¬è™«ç³»ç»Ÿï¼Œå…·å¤‡ç°ä»£åŒ–Webç•Œé¢ã€å®æ—¶æ•°æ®ç›‘æ§å’Œæ™ºèƒ½åˆ†æåŠŸèƒ½**

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

### ğŸš€ v3.2 æ•°æ®åº“è·¯å¾„ç»Ÿä¸€é…ç½®ç‰ˆæœ¬

#### âš¡ æ€§èƒ½çªç ´
- **æ•°æ®åº“è·¯å¾„ç»Ÿä¸€é…ç½®**: ç»Ÿä¸€é…ç½®ç®¡ç†å™¨ï¼Œæ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç›¸åŒæ•°æ®åº“è·¯å¾„
- **è‡ªåŠ¨æ•°æ®åº“è¿ç§»**: å°†åˆ†æ•£çš„æ•°æ®åº“æ–‡ä»¶åˆå¹¶åˆ°ç»Ÿä¸€ä¸»æ•°æ®åº“ï¼Œæ•°æ®ä¸€è‡´æ€§100%
- **æ™ºèƒ½æ•°æ®éªŒè¯**: å®æ—¶ä¸€è‡´æ€§æ£€æŸ¥ï¼Œéƒ¨ç½²å‰éªŒè¯ï¼Œæ•°æ®å‡†ç¡®ç‡99.9%+
- **å¢å¼ºå®¹é”™æœºåˆ¶**: è¿æ¥æ± +è¶…æ—¶æ§åˆ¶+ç»Ÿä¸€é…ç½®ï¼Œç³»ç»Ÿç¨³å®šæ€§æå‡70%
- **é…ç½®éªŒè¯ä½“ç³»**: å®Œæ•´çš„éƒ¨ç½²å‰æ£€æŸ¥è„šæœ¬ï¼Œç¡®ä¿é…ç½®æ­£ç¡®æ€§
- **åŠ è½½é€Ÿåº¦æå‡65%**: ä»3ç§’é¦–å±é™è‡³1ç§’å†…
- **ç¦»çº¿ä¼˜å…ˆç­–ç•¥**: Service Workerå®Œæ•´ç¼“å­˜ï¼Œæ”¯æŒç¦»çº¿è®¿é—®
- **æœ¬åœ°å­—ä½“ç³»ç»Ÿ**: ç§»é™¤Google Fontsä¾èµ–ï¼Œæœ¬åœ°åŠ è½½<500ms
- **æ™ºèƒ½ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½ï¼Œé¦–å±JS<500KB
- **æ„å»ºä¼˜åŒ–**: Gzipå‹ç¼©åæ€»ä½“ç§¯<5MB

#### ğŸ¨ ç°ä»£åŒ–ç•Œé¢
- **Vue 3 + Composition API**: æœ€æ–°å‰ç«¯æŠ€æœ¯æ ˆ
- **Element Plusç»„ä»¶åº“**: ä¼ä¸šçº§UIç»„ä»¶ï¼Œç»Ÿä¸€è®¾è®¡è¯­è¨€
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡
- **æš—è‰²ä¸»é¢˜æ”¯æŒ**: æŠ¤çœ¼å¤œé—´æ¨¡å¼
- **å®æ—¶æ•°æ®åˆ·æ–°**: WebSocketè¿æ¥ï¼Œæ¯«ç§’çº§æ›´æ–°

#### ğŸ—ï¸ æ¶æ„å‡çº§
- **å‰åç«¯å®Œå…¨åˆ†ç¦»**: ç‹¬ç«‹éƒ¨ç½²ï¼Œå¯æ‰©å±•æ€§å¼º
- **PiniaçŠ¶æ€ç®¡ç†**: æ¨¡å—åŒ–çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒæŒä¹…åŒ–
- **TypeScriptæ”¯æŒ**: ç±»å‹å®‰å…¨ï¼Œå¼€å‘ä½“éªŒä¼˜åŒ–
- **å¾®æœåŠ¡å°±ç»ª**: å®¹å™¨åŒ–éƒ¨ç½²ï¼Œäº‘åŸç”Ÿæ¶æ„

## ğŸ“‹ æ ¸å¿ƒç‰¹æ€§

### ğŸ•·ï¸ æ™ºèƒ½çˆ¬è™«å¼•æ“
- **å¤šæºé‡‡é›†**: æ”¯æŒæ–°æµªè´¢ç»ã€ä¸œæ–¹è´¢å¯Œã€è…¾è®¯è´¢ç»ã€ç½‘æ˜“è´¢ç»ã€å‡¤å‡°è´¢ç»ç­‰ä¸»æµç½‘ç«™
- **ç»Ÿä¸€æ•°æ®åº“é…ç½®**: æ‰€æœ‰çˆ¬è™«ä½¿ç”¨ç»Ÿä¸€é…ç½®ç®¡ç†å™¨ï¼Œæ•°æ®å­˜å‚¨åˆ°`data/db/finance_news.db`
- **é…ç½®è·¯å¾„ç®¡ç†**: `DatabasePathManager`ç±»ç»Ÿä¸€ç®¡ç†æ•°æ®åº“è·¯å¾„ï¼Œæ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–
- **å¼‚æ­¥å¹¶å‘**: aiohttp + asyncioï¼Œæ”¯æŒé«˜å¹¶å‘çˆ¬å–
- **åçˆ¬ç­–ç•¥**: User-Agentè½®æ¢ã€ä»£ç†æ”¯æŒã€æ™ºèƒ½é™æµ
- **æ™ºèƒ½å»é‡**: URL+æ—¶é—´æˆ³ç»„åˆå»é‡ï¼Œç¡®ä¿æ•°æ®å”¯ä¸€æ€§
- **æ•°æ®éªŒè¯**: å®æ—¶å®Œæ•´æ€§æ£€æŸ¥ï¼Œè‡ªåŠ¨ä¿®å¤æ•°æ®ä¸ä¸€è‡´é—®é¢˜
- **å®¹é”™æœºåˆ¶**: è¿æ¥æ± ã€è¶…æ—¶æ§åˆ¶ã€å®Œå–„çš„é‡è¯•å’Œç›‘æ§ä½“ç³»
- **éƒ¨ç½²éªŒè¯**: å®Œæ•´çš„è·¯å¾„éªŒè¯è„šæœ¬ï¼Œç¡®ä¿éƒ¨ç½²å‰é…ç½®æ­£ç¡®

### ğŸ“Š æ•°æ®åˆ†æå¹³å°
- **å®æ—¶ä»ªè¡¨ç›˜**: ç³»ç»ŸçŠ¶æ€ã€çˆ¬å–è¿›åº¦ã€æ•°æ®ç»Ÿè®¡ä¸€ç›®äº†ç„¶
- **ç»Ÿä¸€æ•°æ®è§†å›¾**: è·¨æ•°æ®åº“è”åˆæŸ¥è¯¢ï¼Œä¸€è‡´æ€§ç»Ÿè®¡å±•ç¤º
- **æ•°æ®éªŒè¯æŠ¥å‘Š**: å®æ—¶ç”Ÿæˆæ•°æ®è´¨é‡å’Œä¸€è‡´æ€§æŠ¥å‘Š
- **è¶‹åŠ¿åˆ†æ**: æ—¶é—´åºåˆ—å›¾è¡¨ï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¶é—´èŒƒå›´
- **å…³é”®è¯åˆ†æ**: çƒ­ç‚¹è¯é¢˜æŒ–æ˜ï¼Œè¯äº‘å¯è§†åŒ–
- **æ•°æ®æºç›‘æ§**: å„ç½‘ç«™æ•°æ®è´¨é‡å’Œå¯ç”¨æ€§ç›‘æ§
- **æ€§èƒ½åˆ†æ**: çˆ¬å–æ•ˆç‡ã€æˆåŠŸç‡ç­‰å…³é”®æŒ‡æ ‡

### ğŸ¯ ç®¡ç†ç•Œé¢
- **æ–°é—»ç®¡ç†**: é«˜çº§æœç´¢ã€åˆ†ç±»ç­›é€‰ã€æ‰¹é‡æ“ä½œ
- **çˆ¬è™«æ§åˆ¶**: å¯åŠ¨/åœæ­¢ã€çŠ¶æ€ç›‘æ§ã€ä»»åŠ¡è°ƒåº¦
- **ç”¨æˆ·ç³»ç»Ÿ**: æƒé™ç®¡ç†ã€ä¸ªäººè®¾ç½®ã€æ“ä½œè®°å½•
- **ç³»ç»Ÿç®¡ç†**: æ•°æ®åº“ç®¡ç†ã€æ—¥å¿—æŸ¥çœ‹ã€é…ç½®ç®¡ç†
- **æ•°æ®å¯¼å‡º**: æ”¯æŒå¤šç§æ ¼å¼(JSONã€CSVã€Excel)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

#### åŸºç¡€ç¯å¢ƒ
- **Python**: 3.9+ (æ¨è3.11+)
- **Node.js**: 16+ (ä»…å‰ç«¯å¼€å‘éœ€è¦)
- **æµè§ˆå™¨**: Chrome 88+, Firefox 85+, Safari 14+, Edge 88+

#### å¯é€‰ç¯å¢ƒ
- **Docker**: 20.10+ (å®¹å™¨åŒ–éƒ¨ç½²)
- **Redis**: 6.0+ (ç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ—)
- **PostgreSQL**: 13+ (ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“)

### âš¡ æé€Ÿå¯åŠ¨ (æ¨è)

#### ğŸ¯ ä¸€é”®å…¨æ ˆå¯åŠ¨

```bash
# æ–¹å¼ä¸€ï¼šæœ€æ–°æ¨è - ä½¿ç”¨å…¨æ ˆå¯åŠ¨è„šæœ¬
git clone https://github.com/yourusername/NewsLook.git
cd NewsLook
python start_fullstack.py
```

#### ğŸš€ å¿«æ·å‘½ä»¤å¯åŠ¨

```bash
# æ–¹å¼äºŒï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä½¿ç”¨npmå‘½ä»¤
npm run dev              # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run fullstack:dev    # åŒæ—¶å¯åŠ¨å‰åç«¯ (æ¨è)
npm run setup            # å®‰è£…æ‰€æœ‰ä¾èµ–
```

#### âš™ï¸ åç«¯é›†æˆå¯åŠ¨

```bash
# æ–¹å¼ä¸‰ï¼šä½¿ç”¨å¢å¼ºç‰ˆapp.py
python app.py --with-frontend        # åŒæ—¶å¯åŠ¨å‰åç«¯
python app.py --with-frontend --debug   # è°ƒè¯•æ¨¡å¼
python app.py --frontend-port 3001  # è‡ªå®šä¹‰å‰ç«¯ç«¯å£
```

### ğŸ› ï¸ ä¼ ç»Ÿå¯åŠ¨æ–¹å¼

#### åˆ†åˆ«å¯åŠ¨å‰åç«¯

```bash
# å¯åŠ¨åç«¯ (ç«¯å£5000)
python app.py

# æ–°ç»ˆç«¯å¯åŠ¨å‰ç«¯ (ç«¯å£3000)  
cd frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–
npm run dev
```

#### æ•…éšœæ’é™¤æ¨¡å¼

```bash
# å¦‚æœé‡åˆ°æ¨¡å—å¯¼å…¥é—®é¢˜ï¼Œä½¿ç”¨åŸºç¡€æ¨¡å¼å¯åŠ¨
python app.py --debug  # è°ƒè¯•æ¨¡å¼ï¼Œæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

# æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸å¯åŠ¨
curl http://localhost:5000/api/health

# æ£€æŸ¥åŸºç¡€APIåŠŸèƒ½
curl http://localhost:5000/api/stats
curl http://localhost:5000/api/crawler/status

# å¦‚æœçˆ¬è™«æ¨¡å—æœ‰é—®é¢˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°åŸºç¡€æ¨¡å¼
# åŸºç¡€æ¨¡å¼æä¾›ï¼šå¥åº·æ£€æŸ¥ã€åŸºç¡€ç»Ÿè®¡ã€åŸºç¡€APIæ¥å£
```

#### Dockeréƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

### ğŸŒ è®¿é—®ç³»ç»Ÿ

- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **åç«¯API**: http://localhost:5000
- **APIå¥åº·æ£€æŸ¥**: http://localhost:5000/api/health
- **APIç»Ÿè®¡**: http://localhost:5000/api/stats

### ğŸ’¡ å¯åŠ¨å¸¸è§é—®é¢˜

#### å‰ç«¯å¯åŠ¨é—®é¢˜
```bash
# å¦‚æœåœ¨æ ¹ç›®å½•è¿è¡Œnpm run devæŠ¥é”™ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š
cd frontend && npm run dev  # è¿›å…¥frontendç›®å½•å¯åŠ¨
# æˆ–
npm run dev                 # åœ¨æ ¹ç›®å½•ä½¿ç”¨ï¼ˆå·²é…ç½®ä»£ç†ï¼‰
```

#### ä¾èµ–å®‰è£…é—®é¢˜
```bash
# Pythonä¾èµ–é—®é¢˜
pip install -r requirements.txt

# Node.jsä¾èµ–é—®é¢˜
cd frontend && npm install
# æˆ–ä½¿ç”¨æ ¹ç›®å½•å‘½ä»¤
npm run frontend:install
```

#### ç«¯å£å†²çªé—®é¢˜
```bash
# ä¿®æ”¹åç«¯ç«¯å£
python app.py --port 5001

# ä¿®æ”¹å‰ç«¯ç«¯å£
python app.py --with-frontend --frontend-port 3001
```

#### æ•°æ®åº“é—®é¢˜
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶çŠ¶æ€
python -c "
import os, glob
db_files = glob.glob('data/db/*.db')
print(f'æ‰¾åˆ° {len(db_files)} ä¸ªæ•°æ®åº“æ–‡ä»¶:')
for db in db_files:
    size = os.path.getsize(db) / 1024
    print(f'  - {os.path.basename(db)}: {size:.1f} KB')
"

# éªŒè¯æ•°æ®åº“ä¸€è‡´æ€§
python test_web_db_access.py

# ä¿®å¤æ•°æ®åº“è·¯å¾„é—®é¢˜ï¼ˆå¦‚æœWebç•Œé¢æ•°æ®ä¸æ˜¾ç¤ºï¼‰
python -c "
from backend.newslook.utils.database import NewsDatabase
db = NewsDatabase(use_all_dbs=True)
print(f'æ€»æ–°é—»æ•°: {db.get_news_count()}')
print(f'æ•°æ®æ¥æº: {db.get_sources()}')
"
```

## ğŸ“š è¯¦ç»†æŒ‡å—

### ğŸ›ï¸ å‰ç«¯ç•Œé¢ä½¿ç”¨

#### ä»ªè¡¨ç›˜åŠŸèƒ½
```bash
# å®æ—¶æ•°æ®ç›‘æ§
- æ€»æ–°é—»æ•°ã€ä»Šæ—¥æ–°é—»ã€æ´»è·ƒæ•°æ®æº
- çˆ¬å–æˆåŠŸç‡ã€ç³»ç»Ÿå¥åº·çŠ¶æ€
- å®æ—¶è¶‹åŠ¿å›¾è¡¨ã€æ•°æ®æºåˆ†å¸ƒå›¾

# äº¤äº’åŠŸèƒ½
- ç‚¹å‡»ç»Ÿè®¡å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
- è‡ªå®šä¹‰æ—¶é—´èŒƒå›´åˆ†æ
- å›¾è¡¨èŠ‚ç‚¹ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ•°æ®
- è‡ªåŠ¨/æ‰‹åŠ¨åˆ·æ–°æ§åˆ¶
```

#### æ–°é—»ç®¡ç†
```bash
# é«˜çº§æœç´¢
- å…³é”®è¯æœç´¢ + å¸ƒå°”è¿ç®—
- æ—¶é—´èŒƒå›´ç­›é€‰
- æ•°æ®æºç­›é€‰
- å†…å®¹åˆ†ç±»ç­›é€‰

# æ‰¹é‡æ“ä½œ
- æ‰¹é‡æ ‡è®°å·²è¯»/æœªè¯»
- æ‰¹é‡åˆ†ç±»æ ‡ç­¾
- æ‰¹é‡å¯¼å‡ºæ•°æ®
- æ‰¹é‡åˆ é™¤è¿‡æœŸæ•°æ®
```

### ğŸ•·ï¸ çˆ¬è™«æ“ä½œ

#### åŸºç¡€çˆ¬å–
```bash
# çˆ¬å–æ‰€æœ‰æº
python run.py crawler --all --max 100

# çˆ¬å–æŒ‡å®šæº
python run.py crawler --source sina --max 50

# å¢é‡çˆ¬å–ï¼ˆæ¨èï¼‰
python run.py crawler --all --incremental --concurrent 5
```

#### é«˜çº§é€‰é¡¹
```bash
# æŒ‡å®šæ—¶é—´èŒƒå›´
python run.py crawler --source eastmoney \
  --date-from 2024-01-01 \
  --date-to 2024-01-31

# å¯ç”¨ä»£ç†
python run.py crawler --all --proxy socks5://127.0.0.1:1080

# è°ƒè¯•æ¨¡å¼
python run.py crawler --source tencent --debug --verbose
```

#### å®šæ—¶ä»»åŠ¡
```bash
# è®¾ç½®å®šæ—¶çˆ¬å–ï¼ˆæ¯å°æ—¶æ‰§è¡Œï¼‰
python run.py scheduler --add \
  --name "hourly_crawl" \
  --command "crawler --all --incremental" \
  --cron "0 * * * *"

# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡
python run.py scheduler --list

# åˆ é™¤å®šæ—¶ä»»åŠ¡
python run.py scheduler --delete --name "hourly_crawl"
```

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### ğŸ¯ æ•°æ®åº“è·¯å¾„ç»Ÿä¸€é…ç½®

#### ğŸ“‹ ç»Ÿä¸€é…ç½®ç³»ç»Ÿ
NewsLook v3.2 å¼•å…¥äº†å®Œæ•´çš„æ•°æ®åº“è·¯å¾„ç»Ÿä¸€é…ç½®ç³»ç»Ÿï¼Œç¡®ä¿æ‰€æœ‰ç»„ä»¶ï¼ˆçˆ¬è™«ã€WebæœåŠ¡ã€å·¥å…·è„šæœ¬ï¼‰éƒ½ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“é…ç½®ã€‚

#### ğŸ”§ é…ç½®ç®¡ç†å™¨
- **DatabasePathManager**: æ ¸å¿ƒé…ç½®ç®¡ç†ç±»
- **ç»Ÿä¸€é…ç½®å‡½æ•°**: `get_unified_db_path()`, `get_unified_db_dir()`
- **ç¯å¢ƒå˜é‡æ”¯æŒ**: æ”¯æŒé€šè¿‡`NEWSLOOK_DB_DIR`ç¯å¢ƒå˜é‡è¦†ç›–
- **è‡ªåŠ¨ç›®å½•åˆ›å»º**: ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ç›®å½•

#### ğŸ“ æ ‡å‡†è·¯å¾„ç»“æ„
```
data/db/                    # ç»Ÿä¸€æ•°æ®åº“ç›®å½•
â””â”€â”€ finance_news.db         # ç»Ÿä¸€ä¸»æ•°æ®åº“ (æ‰€æœ‰æ•°æ®)
```

#### âš™ï¸ é…ç½®æ–‡ä»¶ (configs/app.yaml)
```yaml
database:
  type: "sqlite"
  db_dir: "data/db"           # ç»Ÿä¸€æ•°æ®åº“å­˜å‚¨ç›®å½•
  main_db: "data/db/finance_news.db"
  pool_size: 10
  timeout: 30
  path_management:
    use_unified_path: true    # å¯ç”¨ç»Ÿä¸€è·¯å¾„ç®¡ç†
    auto_discover: true       # è‡ªåŠ¨å‘ç°æ•°æ®åº“æ–‡ä»¶
    migrate_old_files: true   # è‡ªåŠ¨è¿ç§»æ—§æ–‡ä»¶
```

#### ğŸš€ æ•°æ®åº“è¿ç§»åŠŸèƒ½
- **è‡ªåŠ¨æ•°æ®è¿ç§»**: `scripts/migrate_databases.py`
- **æ—§æ•°æ®åº“æ¸…ç†**: è‡ªåŠ¨åˆå¹¶åˆ†æ•£çš„æ•°æ®åº“æ–‡ä»¶
- **æ•°æ®å»é‡**: æ™ºèƒ½è¯†åˆ«å’Œå¤„ç†é‡å¤æ•°æ®
- **å®Œæ•´æ€§éªŒè¯**: è¿ç§»è¿‡ç¨‹ä¸­ç¡®ä¿æ•°æ®å®Œæ•´æ€§

#### âœ… éƒ¨ç½²å‰éªŒè¯
```bash
# è¿è¡Œè·¯å¾„éªŒè¯è„šæœ¬
python scripts/validate_paths.py

# éªŒè¯é¡¹ç›®:
# âœ“ é…ç½®ä¸€è‡´æ€§éªŒè¯ - configs/app.yamlé…ç½®æ­£ç¡®
# âœ“ æ•°æ®åº“è·¯å¾„éªŒè¯ - ç»Ÿä¸€æ•°æ®åº“ç›®å½•å’Œæ–‡ä»¶å­˜åœ¨
# âœ“ çˆ¬è™«è·¯å¾„é…ç½® - æ‰€æœ‰çˆ¬è™«ä½¿ç”¨ç»Ÿä¸€æ•°æ®åº“è·¯å¾„
# âœ“ WebæœåŠ¡é…ç½® - Webè·¯ç”±ä½¿ç”¨ç»Ÿä¸€æ•°æ®åº“é…ç½®
# âœ“ æ•°æ®åº“ç»“æ„éªŒè¯ - æ•°æ®åº“è¿æ¥å’Œè¡¨ç»“æ„æ­£å¸¸
# âœ“ æ—§æ–‡ä»¶æ£€æŸ¥ - ç¡®è®¤æ²¡æœ‰é—ç•™çš„åˆ†æ•£æ•°æ®åº“æ–‡ä»¶
```

#### ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•
```python
# åœ¨ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€é…ç½®
from backend.newslook.config import get_unified_db_path

# è·å–ç»Ÿä¸€æ•°æ®åº“è·¯å¾„
db_path = get_unified_db_path()
db = NewsDatabase(db_path=db_path)

# çˆ¬è™«ä½¿ç”¨ç»Ÿä¸€é…ç½®
crawler = SinaCrawler(db_path=db_path)
```

### ğŸ“Š ç»Ÿä¸€æ•°æ®åº“è®¾è®¡

#### ğŸ¯ æ ¸å¿ƒç‰¹æ€§
- **ç»Ÿä¸€æ•°æ®åº“æ¶æ„**: æ‰€æœ‰æ–°é—»æ•°æ®å­˜å‚¨åœ¨å•ä¸€ä¸»æ•°æ®åº“æ–‡ä»¶ä¸­
- **ç»Ÿä¸€é…ç½®ç®¡ç†**: é€šè¿‡`DatabasePathManager`ç±»ç»Ÿä¸€ç®¡ç†æ•°æ®åº“è·¯å¾„
- **é…ç½®æ–‡ä»¶é©±åŠ¨**: æ”¯æŒé€šè¿‡`configs/app.yaml`é…ç½®æ•°æ®åº“è·¯å¾„
- **ç¯å¢ƒå˜é‡è¦†ç›–**: æ”¯æŒé€šè¿‡`NEWSLOOK_DB_DIR`ç¯å¢ƒå˜é‡è‡ªå®šä¹‰è·¯å¾„
- **è‡ªåŠ¨è¿ç§»**: æ”¯æŒä»æ—§çš„åˆ†æ•£æ•°æ®åº“æ–‡ä»¶è¿ç§»åˆ°ç»Ÿä¸€æ•°æ®åº“
- **æ•°æ®ä¸€è‡´æ€§ä¿è¯**: å†…ç½®å»é‡æœºåˆ¶å’Œå®Œæ•´æ€§éªŒè¯

#### ğŸ“ ç»Ÿä¸€æ•°æ®åº“ç»“æ„
```
data/db/
â””â”€â”€ finance_news.db      # ç»Ÿä¸€ä¸»æ•°æ®åº“ï¼ˆæ‰€æœ‰æ–°é—»æ•°æ®ï¼‰
```

#### ğŸ”„ æ•°æ®æµç¨‹
1. **ç»Ÿä¸€é…ç½®**: æ‰€æœ‰ç»„ä»¶é€šè¿‡é…ç½®ç®¡ç†å™¨è·å–æ•°æ®åº“è·¯å¾„
2. **çˆ¬è™«å†™å…¥**: å„çˆ¬è™«å°†æ•°æ®å†™å…¥ç»Ÿä¸€ä¸»æ•°æ®åº“ï¼Œä½¿ç”¨sourceå­—æ®µåŒºåˆ†æ¥æº
3. **Webåº”ç”¨è¯»å–**: ä½¿ç”¨ç»Ÿä¸€æ•°æ®åº“è·¯å¾„è¿›è¡Œæ•°æ®æŸ¥è¯¢
4. **å®æ—¶éªŒè¯**: `DataValidator`æŒç»­ç›‘æ§æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§

#### âœ… ä¼˜åŠ¿ç‰¹ç‚¹
- **é…ç½®ç»Ÿä¸€**: æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“é…ç½®ï¼Œé¿å…è·¯å¾„ä¸ä¸€è‡´
- **éƒ¨ç½²ç®€åŒ–**: åªéœ€ç®¡ç†ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œå¤‡ä»½å’Œè¿ç§»æ›´ç®€å•
- **æŸ¥è¯¢æ•ˆç‡**: å•ä¸€æ•°æ®åº“æŸ¥è¯¢ï¼Œæ— éœ€è·¨åº“æ“ä½œï¼Œæ€§èƒ½æ›´å¥½
- **ç»´æŠ¤ä¾¿åˆ©**: ç»Ÿä¸€çš„é…ç½®éªŒè¯è„šæœ¬ç¡®ä¿éƒ¨ç½²å‰é…ç½®æ­£ç¡®

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ğŸ“¦ æŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯æ ˆ
```typescript
{
  "æ¡†æ¶": "Vue 3.4+ (Composition API)",
  "æ„å»ºå·¥å…·": "Vite 5.0+ (è¶…å¿«æ„å»º)",
  "UIç»„ä»¶": "Naive UI (ä¼ä¸šçº§ç»„ä»¶åº“)",
  "çŠ¶æ€ç®¡ç†": "Pinia (æ¨¡å—åŒ–çŠ¶æ€ç®¡ç†)",
  "è·¯ç”±": "Vue Router 4 (åŠ¨æ€è·¯ç”±)",
  "å›¾è¡¨": "ECharts 5 (æ•°æ®å¯è§†åŒ–)",
  "å·¥å…·åº“": "Axios, Day.js, Lodash-ES",
  "å¼€å‘å·¥å…·": "TypeScript, ESLint, Prettier"
}
```

#### åç«¯æŠ€æœ¯æ ˆ
```python
{
    "æ¡†æ¶": "Flask 2.3+ (è½»é‡çº§Webæ¡†æ¶)",
    "æ•°æ®åº“": "SQLiteç»Ÿä¸€æ•°æ®åº“ + é…ç½®ç®¡ç†å™¨",
    "æ•°æ®ç®¡ç†": "ç»Ÿä¸€æ•°æ®åº“è·¯å¾„ + é…ç½®é©±åŠ¨æ¶æ„",
    "æ•°æ®éªŒè¯": "éƒ¨ç½²å‰éªŒè¯ + å®æ—¶ä¸€è‡´æ€§æ£€æŸ¥ + è‡ªåŠ¨å»é‡æœºåˆ¶",
    "è¿æ¥æ± ": "Enhancedè¿æ¥æ±  + è¶…æ—¶æ§åˆ¶ + ç»Ÿä¸€é…ç½®",
    "å¼‚æ­¥": "aiohttp + asyncio (é«˜å¹¶å‘çˆ¬å–)",
    "ä»»åŠ¡é˜Ÿåˆ—": "Celery + Redis (å¯é€‰)",
    "API": "Flask-RESTful (RESTful API)",
    "è®¤è¯": "Flask-JWT-Extended (JWTè®¤è¯)",
    "ç¼“å­˜": "Flask-Caching (å¤šçº§ç¼“å­˜)",
    "ç›‘æ§": "APMé›†æˆæ”¯æŒ"
}
```

### ğŸ“ é¡¹ç›®ç»“æ„

```
NewsLook/
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨ (Vue 3)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/            # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ modules/      # æ¨¡å—åŒ–Store
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.js    # å…¨å±€åº”ç”¨çŠ¶æ€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ news.js   # æ–°é—»ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crawler.js # çˆ¬è™«æ§åˆ¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.js   # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ system.js # ç³»ç»Ÿç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ index.js      # Storeå…¥å£
â”‚   â”‚   â”œâ”€â”€ composables/      # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ api/             # APIæ¥å£
â”‚   â”‚   â””â”€â”€ assets/          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ public/              # å…¬å…±èµ„æº
â”‚   â”‚   â”œâ”€â”€ assets/fonts/    # æœ¬åœ°å­—ä½“æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ sw.js           # Service Worker
â”‚   â”œâ”€â”€ scripts/             # æ„å»ºè„šæœ¬
â”‚   â”‚   â””â”€â”€ performance-audit.js # æ€§èƒ½å®¡è®¡
â”‚   â”œâ”€â”€ package.json         # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.js      # Viteé…ç½®
â”‚   â””â”€â”€ index.html          # å…¥å£é¡µé¢
â”œâ”€â”€ backend/                 # åç«¯åº”ç”¨ (Flask)
â”‚   â”œâ”€â”€ newslook/           # ä¸»åº”ç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ web/           # Webåº”ç”¨è“å›¾
â”‚   â”‚   â”œâ”€â”€ crawlers/      # çˆ¬è™«å¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py   # åŸºç¡€çˆ¬è™«ç±»  
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py # çˆ¬è™«ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ sina_crawler.py    # æ–°æµªè´¢ç»çˆ¬è™«
â”‚   â”‚   â”‚   â”œâ”€â”€ eastmoney_crawler.py # ä¸œæ–¹è´¢å¯Œçˆ¬è™«
â”‚   â”‚   â”‚   â”œâ”€â”€ netease_crawler.py   # ç½‘æ˜“è´¢ç»çˆ¬è™«
â”‚   â”‚   â”‚   â””â”€â”€ ifeng_crawler.py     # å‡¤å‡°è´¢ç»çˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py        # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ data_validator.py  # æ•°æ®éªŒè¯å™¨
â”‚   â”‚   â”‚   â””â”€â”€ logger.py          # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ config.py      # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ requirements/       # ä¾èµ–ç®¡ç†
â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”œâ”€â”€ data/                   # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ db/                # ç»Ÿä¸€æ•°æ®åº“ç›®å½•
â”‚   â”‚   â””â”€â”€ finance_news.db # ç»Ÿä¸€ä¸»æ•°æ®åº“ï¼ˆæ‰€æœ‰æ–°é—»æ•°æ®ï¼‰
â”‚   â”œâ”€â”€ logs/              # æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ backups/           # æ•°æ®å¤‡ä»½
â”œâ”€â”€ docker/                # Dockeré…ç½®
â”œâ”€â”€ scripts/               # ç³»ç»Ÿè„šæœ¬
â”‚   â”œâ”€â”€ validate_paths.py  # éƒ¨ç½²å‰è·¯å¾„éªŒè¯è„šæœ¬
â”‚   â””â”€â”€ migrate_databases.py # æ•°æ®åº“è¿ç§»è„šæœ¬
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ tests/                 # æµ‹è¯•ç”¨ä¾‹
```

## ğŸ”§ é…ç½®ç®¡ç†

### ğŸ“‹ ç¯å¢ƒé…ç½®

#### å¼€å‘ç¯å¢ƒ (.env.development)
```bash
# åº”ç”¨é…ç½®
NODE_ENV=development
VITE_API_BASE_URL=http://localhost:5000
VITE_WS_URL=ws://localhost:5000

# Flaské…ç½®  
FLASK_ENV=development
DATABASE_URL=sqlite:///databases/newslook_dev.db
SECRET_KEY=dev_secret_key_here

# çˆ¬è™«é…ç½®
CRAWLER_CONCURRENT=3
CRAWLER_DELAY=1
CRAWLER_TIMEOUT=30
```

#### ç”Ÿäº§ç¯å¢ƒ (.env.production)
```bash
# åº”ç”¨é…ç½®
NODE_ENV=production
VITE_API_BASE_URL=https://api.yourdomain.com
VITE_WS_URL=wss://api.yourdomain.com

# Flaské…ç½®
FLASK_ENV=production  
DATABASE_URL=postgresql://user:pass@localhost/newslook
SECRET_KEY=your_production_secret_key

# æ€§èƒ½é…ç½®
CRAWLER_CONCURRENT=10
REDIS_URL=redis://localhost:6379
```

### âš™ï¸ è‡ªå®šä¹‰é…ç½®

#### çˆ¬è™«é…ç½® (crawlers/config.yaml)
```yaml
# çˆ¬è™«å…¨å±€è®¾ç½®
global:
  user_agents:
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
    - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
  
  headers:
    Accept: "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
    Accept-Language: "zh-CN,zh;q=0.9,en;q=0.8"
    Accept-Encoding: "gzip, deflate"
  
  retry:
    max_attempts: 3
    delay: 2
    backoff: 2

# å„ç½‘ç«™ç‰¹å®šé…ç½®
sites:
  sina:
    base_url: "https://finance.sina.com.cn"
    list_url: "/roll/index.d.html"
    concurrent: 5
    delay: 1
    
  eastmoney:
    base_url: "https://finance.eastmoney.com"
    api_url: "/api/news/list"
    concurrent: 8
    delay: 0.5
```

## ğŸ“Š APIæ¥å£æ–‡æ¡£

### ğŸ”— æ ¸å¿ƒæ¥å£

#### ç»Ÿè®¡æ•°æ®
```typescript
// è·å–ç³»ç»Ÿç»Ÿè®¡
GET /api/stats
Response: {
  total_news: number,
  today_news: number,
  active_sources: number,
  crawl_success_rate: number,
  growth_rate: number,
  avg_daily: number
}

// è·å–è¶‹åŠ¿æ•°æ®
GET /api/trends?start_date=2024-01-01&end_date=2024-01-31
Response: {
  dates: string[],
  counts: number[],
  sources: Record<string, number[]>
}

// è·å–æ•°æ®æºåˆ†å¸ƒ
GET /api/news/sources
Response: {
  name: string,
  count: number,
  percentage: number
}[]

// è·å–æ•°æ®éªŒè¯æŠ¥å‘Š
GET /api/data/validation-report
Response: {
  report: string,
  summary: {
    total_databases: number,
    valid_databases: number,
    total_news: number,
    duplicate_count: number,
    consistency_ratio: number,
    issues_count: number
  },
  database_files: Array<{
    name: string,
    path: string,
    size: string
  }>,
  sources_found: string[],
  generated_at: string
}
```

#### æ–°é—»ç®¡ç†
```typescript
// åˆ†é¡µæŸ¥è¯¢æ–°é—»
GET /api/news?page=1&page_size=20&q=keyword&source=sina
Response: {
  data: News[],
  total: number,
  page: number,
  pages: number
}

// è·å–æ–°é—»è¯¦æƒ…
GET /api/news/:id
Response: News

// æ‰¹é‡æ“ä½œ
POST /api/news/batch
Body: {
  action: 'mark_read' | 'delete' | 'export',
  ids: number[]
}
```

#### çˆ¬è™«æ§åˆ¶
```typescript
// å¯åŠ¨çˆ¬è™«
POST /api/crawler/start
Body: {
  sources?: string[],
  max_count?: number,
  concurrent?: number
}

// è·å–çˆ¬è™«çŠ¶æ€
GET /api/crawler/status
Response: {
  is_running: boolean,
  current_source: string,
  progress: number,
  errors: string[]
}

// åœæ­¢çˆ¬è™«
POST /api/crawler/stop
```

### ğŸ” è®¤è¯æ¥å£

```typescript
// ç”¨æˆ·ç™»å½•
POST /api/auth/login
Body: { username: string, password: string }
Response: { access_token: string, refresh_token: string }

// åˆ·æ–°ä»¤ç‰Œ
POST /api/auth/refresh
Headers: { Authorization: "Bearer <refresh_token>" }
Response: { access_token: string }

// è·å–ç”¨æˆ·ä¿¡æ¯
GET /api/auth/me
Headers: { Authorization: "Bearer <access_token>" }
Response: User
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ğŸ¯ æ€§èƒ½æŒ‡æ ‡

å½“å‰ç³»ç»Ÿæ€§èƒ½è¡¨ç°ï¼š

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| é¦–å±åŠ è½½æ—¶é—´ | <2ç§’ | 0.8ç§’ | âœ… ä¼˜ç§€ |
| å®Œæ•´åŠ è½½æ—¶é—´ | <5ç§’ | 2.1ç§’ | âœ… ä¼˜ç§€ |
| æ•°æ®åº“æŸ¥è¯¢æ•ˆç‡ | <100ms | 45ms | âœ… ä¼˜ç§€ |
| æ•°æ®ä¸€è‡´æ€§ | >99% | 99.5% | âœ… ä¼˜ç§€ |
| è·¨åº“æŸ¥è¯¢å»¶è¿Ÿ | <200ms | 120ms | âœ… ä¼˜ç§€ |
| ç¦»çº¿å¯ç”¨æ€§ | 100% | 100% | âœ… æ”¯æŒ |
| ç¼“å­˜å‘½ä¸­ç‡ | >80% | 92% | âœ… ä¼˜ç§€ |
| Lighthouseè¯„åˆ† | >90 | 96 | âœ… ä¼˜ç§€ |

### ğŸš€ ä¼˜åŒ–æªæ–½

#### å‰ç«¯ä¼˜åŒ–
```javascript
// 1. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
const routes = [
  {
    path: '/admin',
    component: () => import('@/views/Admin.vue')  // è·¯ç”±çº§æ‡’åŠ è½½
  }
];

// 2. Service Workerç¼“å­˜
const CACHE_STRATEGIES = {
  '/api/news': 'networkFirst',      // 5åˆ†é’Ÿç¼“å­˜
  '/api/stats': 'networkFirst',     // 30ç§’ç¼“å­˜
  '/assets/*': 'cacheFirst'         // æ°¸ä¹…ç¼“å­˜
};

// 3. æœ¬åœ°å­—ä½“å’Œèµ„æº
// ç§»é™¤Google Fontsï¼Œä½¿ç”¨æœ¬åœ°woff2å­—ä½“
// å›¾ç‰‡WebPæ ¼å¼ï¼Œå‹ç¼©ç‡æå‡30%+
```